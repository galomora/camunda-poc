<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core" xmlns:p="http://primefaces.org/ui" xmlns:b="http://bootsfaces.net/ui">

<ui:composition template="/layout/template.xhtml">
	<ui:define name="title">#{commonProperties['tags.tasks']}</ui:define>
	<ui:define name="content">
		<h:form id="principal_form">
			<b:panel title="#{commonProperties['tags.tasks.assigned']}" look="primary">
				<b:row>
					<b:column col-md="8">
						<p:dataTable value="#{userTaskListController.assignedTasks}" var="task" selectionMode="single" rowKey="#{task.id}">
							<p:ajax event="rowSelect" listener="#{userTaskListController.selectAssignedTask()}" update="principal_form:assigned-task-detail-panel">
								<f:setPropertyActionListener value="#{task}" target="#{userTaskListController.assignedTask}"></f:setPropertyActionListener>
							</p:ajax>
							<p:column headerText="#{commonProperties['tags.name']}">
								<h:outputText value="#{task.name}" />
							</p:column>
							<p:column headerText="#{commonProperties['tags.description']}">#{task.description}</p:column>
						</p:dataTable>
					</b:column>
					<b:column col-md="4">
						<b:panel title="#{commonProperties['tags.tasks.detail']}" look="info" id="assigned-task-detail-panel">
							<b:row>
								<b:column col-md="2">
									<label><h:outputText value="#{commonProperties['tags.name']}" /> </label>
								</b:column>
								<b:column col-md="2">
									<h:outputText value="#{userTaskListController.assignedTaskWithInfo.task.name}" />
								</b:column>
							</b:row>
							<b:row>
								<b:column col-md="4">
									<b:commandButton id="unclaim_task_button" value="" action="#{userTaskListController.unclaimTask}" />
								</b:column>
							</b:row>
							<b:row>
								<b:column col-md="4">
									<b:commandButton id="execute_assigned_task_button" value="" action="#{userTaskListController.assignedTaskWithInfo.link}" />
								</b:column>
							</b:row>
						</b:panel>
					</b:column>
				</b:row>
			</b:panel>

			<b:panel title="#{commonProperties['tags.tasks.unassigned']}" look="primary">
				<b:row>
					<b:column col-md="8">
						<p:dataTable value="#{userTaskListController.unassignedTasks}" var="task" selectionMode="single" rowKey="#{task.id}">
							<p:ajax event="rowSelect" listener="#{userTaskListController.selectUnassignedTask()}" update="principal_form:unassigned-task-detail-panel">
								<f:setPropertyActionListener value="#{task}" target="#{userTaskListController.unassignedTask}"></f:setPropertyActionListener>
							</p:ajax>
							<p:column headerText="#{commonProperties['tags.name']}">
								<h:outputText value="#{task.name}" />
							</p:column>
							<p:column headerText="#{commonProperties['tags.description']}">#{task.description}</p:column>
						</p:dataTable>
					</b:column>
					<b:column col-md="4">
						<b:panel title="#{commonProperties['tags.tasks.detail']}" look="info" id="unassigned-task-detail-panel">
							<b:row>
								<b:column col-md="2">
									<label><h:outputText value="#{commonProperties['tags.name']}" /> </label>
								</b:column>
								<b:column col-md="2">
									<h:outputText value="#{userTaskListController.unassignedTaskWithInfo.task.name}" />
								</b:column>
							</b:row>
							<b:row>
								<b:column col-md="4">
									<b:commandButton id="claim_task_button" value="" action="#{userTaskListController.claimTask}" />
								</b:column>
							</b:row>
							<b:row>
								<b:column col-md="4">
									<b:commandButton id="execute_unassigned_task_button" value="" action="#{userTaskListController.unassignedTaskWithInfo.link}" />
								</b:column>
							</b:row>
						</b:panel>
					</b:column>
				</b:row>
			</b:panel>

		</h:form>
	</ui:define>
</ui:composition>

</html>